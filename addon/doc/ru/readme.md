# Total Commander

Это дополнение улучшает доступность файлового менеджера "Total Commander". Оно совместимо со всеми версиями, начиная с  TC 7.0,но часть функций работает только в версиях 9.0 и выше.

[Поддержать автора дополнения](https://jnsoft.ru/ru/articles/nvda/extendedTotalCmd/donation.php)
[Репозиторий GitHub](https://github.com/jawhien/extendedTotalCmd)

<!-- border -->

# Содержание

* [Совместимость](#user-content-compatibility)
* [Основные возможности](#user-content-main-features)
* [Установка](#user-content-installation)
* [Клавиатурные команды](#user-content-key-commands)
* [Благодарности](#user-content-acknowledgments)
* [Вопросы и ответы](#user-content-faq)
* [Список изменений](#user-content-change-log)
* [Официальная страница дополнения](https://jnsoft.ru/ru/articles/nvda/extendedTotalCmd/)

<!-- border -->

<a name="user-content-compatibility"></a>
# Совместимость

* NVDA 2018.3 или выше, в том числе 2021.1.
* Предупреждение! Дополнение может быть не совместимо с другими дополнениями для Total Commander, а также с дополнением "звуки при навигации по файлам".

<a name="user-content-main-features"></a>
# Основные возможности

* Более точное определение правой и левой панели.
* Звуковая индикация при достижении границ списка элементов.
* Произношение меток для элементов в окне выбора дисков.
* Поддержка работы со вкладками.
* Поддержка многоколоночного режима отображения. (Эта функция доступна только в TC 9+).
* Возможность быстро узнать активную панель. Для этого нажмите сочетание клавиш NVDA + стрелка вверх, или NVDA + TAB.
* Полная поддержка 64-битных версий Total Commander.
* Озвучивание действий при выделении элементов или его отмене. (Эта функция доступна только в TC 9+).
* Возможность узнать количество выделенных элементов. (Эта функция доступна только в TC 9+).
* Возможность узнать размер выбранного файла, или всех выделенных элементов.  (Эта функция доступна только в TC 9+).
* Произношение правильной информации о позиции элемента в списке. Для работы этой функции включите соответствующую опцию в диалоге настроек NVDA. (Эта функция доступна только в TC 9+).

<a name="user-content-installation"></a>
# Установка

1. Скачайте файл дополнения NVDA [на этой странице](https://github.com/jawhien/extendedTotalCmd/releases/latest).
2. В любом файловом менеджере перейдите в каталог, куда был скачан файл, выберите его и нажмите клавишу "Enter".
3. Подтвердите установку, нажав кнопку "Да" в появившемся диалоговом окне.
4. Если вы обновляете дополнение, вам будет необходимо ещё раз подтвердить установку.

Установить дополнение можно и через менеджер дополнений NVDA, для этого сделайте следующее:
1. Скачайте файл дополнения NVDA [на этой странице](https://github.com/jawhien/extendedTotalCmd/releases/latest).
2. Откройте менеджер дополнений NVDA из меню "Сервис" в главном меню программы.
3. Нажмите кнопку "Установить".
4. Выберите скачанный файл дополнения.
5. Подтвердите установку, нажав кнопку "Да" в появившемся диалоговом окне.
6. Если вы обновляете дополнение, вам будет необходимо ещё раз подтвердить установку.

<a name="user-content-key-commands"></a>
# Клавиатурные команды

* Control + Shift + E - Сообщает информацию о выделенных элементах.
* Control + Shift + R - Сообщает информацию о размере выделенных элементов. Если не выделено ни одного элемента, сообщает размер файла в фокусе.
* Control + Shift + D - Сообщает полный путь к текущему каталогу. При двойном нажатии копирует путь в буфер обмена.
* Control + Shift + T - сообщает дату и время изменения.

<a name="user-content-acknowledgments"></a>
# Благодарности

Хотелось бы поблагодарить всех тех, кто присылает свои предложения, а также помогает в тестировании и обнаружении ошибок. Ваш вклад, несомненно, очень важен для развития этого дополнения.

<a name="user-content-faq"></a>
# Вопросы и ответы

В: Не работает определение размера файла под курсором

О: В некоторых случаях (например при работе по FTP) определение размера файла под курсором работает только в кратком виде.

В: как я могу помочь развитию дополнения?

О: Если вам понравилось моё дополнение, вы можете пожертвовать любую сумму на [специальной странице](https://jnsoft.ru/ru/articles/nvda/extendedTotalCmd/donation.php).

В: Я нашёл ошибку/у меня есть предложения по улучшению дополнения, как я могу связаться с вами?

О: В этом случае вам необходимо [создать новый вопрос](https://github.com/jawhien/extendedTotalCmd/issues/new) в репозитории GitHub. Опишите как можно подробнее вашу проблему/предложение.

В: Дополнение не поддерживает мой язык, могу ли я помочь с переводом?

О: Да, напишите, пожалуйста, на адрес электронной почты, который указан в дополнении, и я вышлю вам необходимые файлы и инструкции. Адрес электронной почты автора можно посмотреть в менеджере дополнений NVDA. Ну и если вы знакомы с GitHub, можете просто отправить мне Pull request с переводом, это будет гораздо удобнее и быстрее.

<a name="user-content-change-log"></a>
# Список изменений

V3.0: 01.06.2021

* Введена поддержка детального режима отображения. Внимание: эта функция экспирементальная и иногда может работать неправильно. Если вы обнаружили ошибку, пожалуйста, сообщите об этом.
* Полностью переработан модуль обновлений. Теперь он сам скачивает и устанавливает новую версию, и нет необходимости делать это вручную.
* Добавлена Чешская и Словацкая локализация. Спасибо Radek Žalud и Peter Vágner за предоставленные переводы.
* Изменены требования к совместимости. Теперь для установки дополнения необходима NVDA версии 2018.3 или выше.
* Исправлена ошибка, которая приводила к тому, что некоторые выпадающие списки отображались неправильно, например такие, как открываются по нажатию клавиши "F2" в окне групового переименования.
* Исправлены некоторые проблемы совместимости с NVDA 2018.3.
* Исправлена совместимость с NVDA 2021.1.

V2.5: 19.01.2021

* Исправление в модуле обновления: с версии 3.0 будут обновлены требования к совместимости. Поскольку новые версии будут поддерживать NVDA 2018.3 или выше, пользователи более ранних версий программы будут получать сообщение об этом при проверке обновлений.
* Улучшение: при чтение строки состояния теперь будет сообщаться информация о выбранном элементе, такая как размер, дата создания, атрибуты, информация о локальном диске и т.д. в зависимости от настроек TC.
* Улучшение: добавлена возможность быстро узнать время и дату изменения выбранного элемента, для этого нажмите комбинацию Control+Shift+t. В настройках NVDA можно изменить жесты для этого действия.
* Улучшение: теперь если определение размера занимает более 1 секунды, будут звучать тональные сигналы до завершения процесса.
* Улучшение: дополнение теперь использует стандартный шаблон и SCons для сборки.
* Исправление: позиция объекта больше не сообщается на элементе "..".
* Исправление: в некоторых случаях определение размера завершалось с ошибкой.
* Другие мелкие исправления и оптимизация.

V2.4: 13.12.2020

* Добавлено определение размера директорий под курсором. Это более медленный процесс, чем определение размера одного файла и может занять несколько секунд.
* Добавлена автоматическая проверка обновлений после запуска NVDA. Примечание: автоматическая проверка обновлений не будет производиться, если в настройках отключена проверка обновлений для NVDA.
* Исправлена ошибка, из-за которой размер файлов не определялся в некоторых случаях.
* Исправлена ошибка, из-за которой всегда открывалась страница сайта на английском языке.
* Исправлены некоторые ложные срабатывания событий выделения.
* Другие мелкие улучшения.

V2.3: 05.10.2020

* Исправлено неправильное определение активной панели в некоторых случаях.
* Исправлена поддержка вкладок в некоторых диалоговых окнах 32-битной версии.
* Сообщения о выделении файлов или его отмене больше не зависит от нажатия определённых клавиш.
* Исправлены дублирующиеся сообщения при выделении файлов.
* Исправлены постоянные сообщения о выделенных файлах при переключении вкладок в главном окне Total Commander.
* Улучшения диалогов с сообщениями. Теперь при появлении таких диалоговых окон (например при удалении файлов) NVDA будет читать информацию, которая отображается на экране.
* Улучшение диалога перезаписи файлов. Теперь при появлении сообщения о перезаписи файлов NVDA будет сообщать всю информацию, которая отображается на экране.
* В пути к текущей директории теперь отсутствует завершающий знак ">".
* Исправлено определение размера выделенных файлов. Теперь он сообщается в том виде, в каком отображается на экране. Задать формат отображения можно в настройках Total Commander.
* Исправлено определение размера файла под курсором. Теперь оно сообщается корректно как в кратком, так и в подробном виде.
* Исправлено определение размера файлов с UNC-путями и при работе по FTP. Размер теперь сообщается в том виде, в каком отображается на экране. изменить формат отображения можно в настройках Total Commander. (Работает корректно только в кратком виде)
* Обновлены некоторые сообщения.
* Обновлена русская локализация.
* Полная оптимизация кода.
* Другие мелкие улучшения и исправления.

V2.2.0: 20.04.2020

* При переключении вкладок теперь будет сообщаться название выбранной вкладки, а также её позиция, если это включено в настройках NVDA.
* Добавлена функция копирования пути к текущей папке в буфер обмена по двойному нажатию CTRL+SHIFT+D
* Исправлена ошибка, приводящая к проблемам при определении версии TC.
* Исправлена ошибка при определении размера файла под курсором связанная с использованием большого шрифта.
* Оптимизация кода.
* Другие мелкие улучшения и исправления.

V2.1.0: 21.03.2020

* Добавлена новая функция для объявления полного пути к текущему каталогу.
* Добавлена возможность проверки обновления. Для проверки обновления откройте меню сервис в главном меню NVDA и выберите пункт "Обновить дополнение Total Commander..."
* Исправлена ошибка, при которой в Total Commander версий 7 и 8 при выделении файлов произносилось сообщении о том, что версия TC не поддерживается.
* Теперь дополнение может определять размер любого файла, даже если он не выделен.
* Исправлена ошибка, при которой размер элементов в имени которых есть знак "." не мог быть определён.
* Теперь размер элементов может быть представлен в байтах, кБ, мБ, гБ или тБ. Значение будет автоматически преобразовано в необходимый формат.
* При озвучивании размера каталога, если он ещё не определён, дополнение будет сообщать об этом.
* Полностью обновлена документация. Сделана вёрстка страниц для удобного чтения.
* Удалены неиспользуемые переменные.
* Полная оптимизация кода.

V2.0.1: 01.03.2020

* Исправлены ошибки в документации

V2.0: 22.02.2020

* Исправлена ошибка, когда границы списка ошибочно определялись на некоторых файлах.
* Исправлена проблема в 32 битных версиях tc8+, когда при выходе на предыдущий каталог, объявлялся сначала первый элемент списка, а затем элемент в фокусе.
* Добавлено объявление позиций элементов в списке, если в настройках NVDA включена эта возможность. (Только в TC9+).
* Добавлена возможность сообщения информации о выделенных элементах по ctrl+shift+e. (Только в TC9+).
* Добавлено объявление выделенных элементов при нажатии CTRL+A. (Только в TC9+).
* Добавлено объявление об отмене выделения при нажатии CTRL+num-. (Только в TC9+).
* Добавлено объявление размера выделенных файлов по нажатию CTRL+SHIFT+R. (Только в TC9+).

V1.4: 19.07.2019

* Сигнал границ списка заменён на стандартный звук windows.
* Добавлен сигнал верхней границы списка.
* Теперь обрабатываются не только стрелки, но и Home, End, PageUp и PageDown клавиши для сигнала границ списка.
* Добавлена совместимость с новыми версиями NVDA.

V1.3

* Звуковой сигнал теперь будет воспроизводиться только при навигации по списку, когда нажата стрелка вниз на последнем элементе списка, а не при попадании фокуса на последний элемент.
* Исправлено ошибочное поведение вне главного окна, настройках и других списках.
* Улучшено поведение в диалоге подключения к FTP.

V1.2

* Изменён механизм определения активной панели в версиях 8 и выше.
* Оптимизирован код, чтобы избежать проблем с версиями 7 и ниже.
* Когда фокус попадёт на последний элемент списка, будет воспроизводиться звуковой сигнал.
* Исправлено ошибочное произношение активной панели вне главного окна.

V1.1

* Теперь в окне выбора диска читаются метки дисков.
* К элементам добавлено описание с названием активной панели, при нажатии клавиш (NVDA + UpArrow) или (NVDA + TAB) будет произнесено название элемента и название активной панели.
* Мелкие улучшения.

V1.0

* Первая версия.
